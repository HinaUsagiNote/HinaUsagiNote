---
layout: single
title: '변수와 연산자'
typora-root-url: ../
categories: Python시각화.02.각종그래프.01
tag: Python시각화
toc: true
---

# 1. 선 그래프 (Line plot) 그리기
## 1.1 선 그래프(꺽은선 그래프)
- 점과 점을 선으로 연결한 그래프
- 시간의 흐름에 따른 변화를 표현할 때 많이 사용한다. (시계열)
- `plot([x], y)` 
    - 1번인수 : x값(생략가능), 2번인수 y값
    - 인수가 하나인 경우 y 축의 값으로 설정되고 X값은 (0 ~ len(y)-1) 범위로 지정된다.
    - x와 y의 원소개수는 같아야 한다.
- 하나의 axes(subplot)에 여러 개의 선 그리기
    - 같은 axes에 plot()를 여러번 실행한다.

## 1.2 선 스타일
- https://matplotlib.org/3.0.3/gallery/lines_bars_and_markers/line_styles_reference.html


```python
import matplotlib.pyplot as plt
import numpy as np

# np.lispace : 1 ~ 10 동일한 간격 100등분
x = np.linspace(0, 10, num=100) 

# plot(x,y) : 선 그래프
plt.plot(x, x)

# x -1 : 원소단위 계산(모든 원소들의 값 -1)
## linestyle : 선 스타일 변경 => " : -. -- - " 
plt.plot(x, x-1, linestyle=':', label=':')
plt.plot(x, x-2, linestyle='-.', label='-.')
plt.plot(x, x+1, linestyle='--', label='--')
# linestyle Default : ' - '
plt.plot(x, x+2, linestyle='-', label='-')

plt.legend()

plt.show()
```


​    
![png](output_2_0.png)
​    



```python
x = np.linspace(1, 10, num=10)

# marker : x,y 값들이 만나는 지점을 " . "으로 표시
plt.plot(x,x, marker='.')

plt.show()
```


​    
![png](output_3_0.png)
​    


## 1.3 선 그래프 활용
- [서울시 연도별 황사 경보발령 현황](http://data.seoul.go.kr/dataList/datasetView.do?infId=OA-2227&srvType=S&serviceKind=1&currentPageNo=1)
- 연도별 관측일수와 황사최대농도의 변화를 그래프로 시각화


```python
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('data/서울시 연도별 황사 경보발령 현황.csv')
df.shape
```




    (12, 7)




```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>년도</th>
      <th>주의보 발령횟수</th>
      <th>주의보 발령일수</th>
      <th>경보 발령횟수</th>
      <th>경보 발령일수</th>
      <th>관측일수</th>
      <th>최대농도(㎍/㎥/시)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006</td>
      <td>4</td>
      <td>5</td>
      <td>1</td>
      <td>2</td>
      <td>11</td>
      <td>2941</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2007</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>12</td>
      <td>1355</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>11</td>
      <td>933</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2009</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>9</td>
      <td>1157</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2010</td>
      <td>4</td>
      <td>5</td>
      <td>2</td>
      <td>3</td>
      <td>15</td>
      <td>1354</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2011</td>
      <td>4</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
      <td>662</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2012</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>338</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2013</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>226</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2014</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>259</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2015</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>15</td>
      <td>902</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2016</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>481</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2017</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>423</td>
    </tr>
  </tbody>
</table>
</div>




```python
df['최대농도(㎍/㎥/시)']
```




    0     2941
    1     1355
    2      933
    3     1157
    4     1354
    5      662
    6      338
    7      226
    8      259
    9      902
    10     481
    11     423
    Name: 최대농도(㎍/㎥/시), dtype: int64




```python
df.columns
```




    Index(['년도', '주의보 발령횟수', '주의보 발령일수', '경보 발령횟수', '경보 발령일수', '관측일수',
           '최대농도(㎍/㎥/시)'],
          dtype='object')




```python
# 최대농도 컬럼명 변경
df.rename(columns={df.columns[-1]: '최대농도'}, inplace=True)
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>년도</th>
      <th>주의보 발령횟수</th>
      <th>주의보 발령일수</th>
      <th>경보 발령횟수</th>
      <th>경보 발령일수</th>
      <th>관측일수</th>
      <th>최대농도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006</td>
      <td>4</td>
      <td>5</td>
      <td>1</td>
      <td>2</td>
      <td>11</td>
      <td>2941</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2007</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>12</td>
      <td>1355</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>11</td>
      <td>933</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2009</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>9</td>
      <td>1157</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2010</td>
      <td>4</td>
      <td>5</td>
      <td>2</td>
      <td>3</td>
      <td>15</td>
      <td>1354</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2011</td>
      <td>4</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
      <td>662</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2012</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>338</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2013</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>226</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2014</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>259</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2015</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>15</td>
      <td>902</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2016</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>481</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2017</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>423</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 년도에 따른 황사 최대농도의 변화흐름
## X : 변화흐름기준(년도) , Y : 변화량 값 (최대농도)

plt.figure(figsize=(15,5))

plt.plot(df['년도'], df['최대농도'], color='r')

plt.title('년도별 황사 최대농도의 변화흐름')

plt.xlabel('년도')
plt.ylabel('최대농도(㎍/㎥/시)')

plt.grid(True, linestyle=':', color='k')

plt.show()
```


​    
![png](output_10_0.png)
​    



```python
# 년도에 따른 주의보/경보 발령횟수의 변화흐름을 비교
## X : 년도, Y : 주의보, 경보

# figure(figsize=) : 그래프 테이블 크기 
plt.figure(figsize=[10, 4])

# alpha : 겹치는 부분을 다 보고싶을 경우 조절 (모든 plot의 공통 파라미터)
plt.plot(df['년도'], df['주의보 발령횟수'], label='주의보', color='b', alpha=0.5)
plt.plot(df['년도'], df['경보 발령횟수'], label='경보', color='r', alpha=0.5)

plt.title('발령횟수의 변화흐름', fontsize=18)

plt.xlabel('년도')
plt.ylabel('주의보/경보 발령횟수')

# x,y tick 
## fontszie : 폰트 사이즈
## rotation : 폰트 각도
plt.xticks(ticks=df['년도'], fontsize=12, rotation=45)

# legend : 범례
plt.legend()

# grid : 가이드선
plt.grid()

plt.show()
```


​    
![png](output_11_0.png)
​    


## 최대 농도와 관측일 수의 연도별 변화를 시각화
- ### 하나의 축을 공유하고 두개의 축을 가지는 그래프 그리기
- 값의 범위(Scale)이 다른 두 값과 관련된 그래프를 한 Axes(subplot)에 그리는 경우
- X축을 공유해 2개의 Y축을 가지는 그래프
    - axes.twinx() 를 이용해 axes를 복사
- Y축을 공유해 2개의 X축을 가지는 그래프
    - axes.twiny() 를 이용해 axes를 복사


```python
import matplotlib.pyplot as plt

plt.figure(figsize=[12, 5])

plt.title('최대농도, 관측일수 년도별 변화')

axes1 = plt.plot(df['년도'], df['관측일수'], label='관측일수', c='b')
axes2 = plt.plot(df['년도'], df['최대농도'], label='최대농도', c='r')

plt.xlabel('년도')
plt.ylabel('최대농도 / 관측일수')

plt.xticks(ticks=df['년도'])

plt.legend()
plt.grid(True)
plt.show()
```


​    
![png](output_13_0.png)
​    



```python
import matplotlib.pyplot as plt

plt.figure(figsize=(13,5))

# axes 객체 받아오기
ax1 = plt.gca()

# ax1과 x축을 공유하면서 오른쪽 spine이 y축인 axes를 생성
ax2 = ax1.twinx()

plt.title('년도별 관측일수/최대농도')

ax1.plot(df['년도'], df['관측일수'], c='b', label='관측일수', linestyle='--', marker='.')
ax2.plot(df['년도'], df['최대농도'], c='r', label='최대농도', linestyle='-.',marker='*')

ax1.set_xlabel('년도')
ax1.set_ylabel('일수')
ax2.set_ylabel('농도(㎍/㎥/시)')

ax1.set_xticks(ticks=df['년도'])

# 일수 ticks 조정
ax1.set_yticks(range(0,16, 2))

ax1.grid(c='gray', linestyle=':')

# loc='상하위치 좌우위치'
## bbox_to_anchor = (x, y)좌표( 0 ~ 1 ), loc='상하 좌우'
### bbox: legend box, anchor: 위치, loc: bbox의 어느 지점을 anchor점에 맞출것인지 지정
ax1.legend(bbox_to_anchor = (1.3, 1), loc='upper right', fontsize=18, shadow=True)
ax2.legend(bbox_to_anchor = (1.3, 0.65), loc='lower right', fontsize=18, shadow=True)


plt.show()
```


​    
![png](output_14_0.png)
​    



```python
## legend box 설정
plt.plot([1, 2, 3], np.array([10, 20, 30]), label='line plot1')
plt.plot([1, 2, 3], np.array([10, 20, 30])+1, label='line plot2')
plt.plot([1, 2, 3], np.array([10, 20, 30])+2, label='line plot3')
plt.plot([1, 2, 3], np.array([10, 20, 30])+3, label='line plot4')
plt.plot([1, 2, 3], np.array([10, 20, 30])+4, label='line plot5')
plt.plot([1, 2, 3], np.array([10, 20, 30])+5, label='line plot6')
plt.plot([1, 2, 3], np.array([10, 20, 30])+6, label='line plot7')

# ncol : 지정한 열수에 나눠서 출력 
plt.legend(fontsize=10, ncol=2, bbox_to_anchor=(1.03, 1), loc='upper left', shadow=True)
plt.show()
```


​    
![png](output_15_0.png)
​    


# 2. 산점도 (Scatter Plot) 그리기
## 2.1 산점도(산포도)
- X와 Y축을 가지는 좌표평면상 관측값들을 점을 찍어 표시하는 그래프
- 변수(Feature)간의 상관성이나 관측값들 간의 군집 분류를 확인할 수 있다.
- `scatter()` 메소드 사용
    - 1번인수 : x축 값, 2번인수 y축 값
    - x와 y값들을 모두 매개변수로 전달해야 한다.
        - x와 y의 원소의 수는 같아야 한다.
    - c/color: 색지정
        - c와 x, y와 같은 원소수를 가지는 Iterable 타입 객체로 설정할 경우 각 마커마다 다른 색상을 설정할 수 있다
    - s: 점 크기 지정
      


```python
import numpy as np
import matplotlib.pyplot as plt
```


```python
x = range(1, 1001, 50)
y = range(1, 1001, 50)
y2 = range(1000, 0, -50)
```


```python
# 비례 , 반비례
plt.scatter(x, y)
plt.scatter(x, y2)

plt.show()
```


​    
![png](output_19_0.png)
​    


## 2.2 설정
- marker (마커)
    - marker란 점의 모양을 말하며 미리정의된 값으로 변경할 수있다.
    - scatter() 메소드의 marker 매개변수를 이용해 변경한다. 
    - https://matplotlib.org/stable/api/markers_api.html
- s
    - 정수: 마커의 크기
- alpha    
    - 하나의 마커에 대한 투명도
    - 0 ~ 1 사이 실수를 지정 (default 1)


```python
# 1 ~ 5 사이 랜덤 정수 30개
np.random.randint(1,5, 30)
```




    array([4, 2, 4, 4, 3, 1, 1, 2, 4, 1, 1, 4, 3, 3, 2, 3, 2, 2, 3, 3, 3, 2,
           2, 4, 2, 2, 4, 4, 3, 4])




```python
plt.figure(figsize=(8,8))

plt.scatter(x=np.random.randint(1, 5, 30), y=np.random.randint(1, 5, 30), marker='D', s=100)

plt.scatter(x=np.random.randint(5, 10, 30), y=np.random.randint(5, 10, 30), marker='X', s=50)

plt.show()
```


​    
![png](output_22_0.png)
​    


## 2.3 산점도 활용


```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
```


```python
df = pd.read_csv('data/diamonds.csv')
df.shape
```




    (53940, 10)




```python
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 53940 entries, 0 to 53939
    Data columns (total 10 columns):
     #   Column   Non-Null Count  Dtype  
    ---  ------   --------------  -----  
     0   carat    53940 non-null  float64
     1   cut      53940 non-null  object 
     2   color    53940 non-null  object 
     3   clarity  53940 non-null  object 
     4   depth    53940 non-null  float64
     5   table    53940 non-null  float64
     6   price    53940 non-null  int64  
     7   x        53940 non-null  float64
     8   y        53940 non-null  float64
     9   z        53940 non-null  float64
    dtypes: float64(6), int64(1), object(3)
    memory usage: 4.1+ MB


###  캐럿(carat)과 가격(Price)간의 상관관계 시각화


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>carat</th>
      <th>cut</th>
      <th>color</th>
      <th>clarity</th>
      <th>depth</th>
      <th>table</th>
      <th>price</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.23</td>
      <td>Ideal</td>
      <td>E</td>
      <td>SI2</td>
      <td>61.5</td>
      <td>55.0</td>
      <td>326</td>
      <td>3.95</td>
      <td>3.98</td>
      <td>2.43</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.21</td>
      <td>Premium</td>
      <td>E</td>
      <td>SI1</td>
      <td>59.8</td>
      <td>61.0</td>
      <td>326</td>
      <td>3.89</td>
      <td>3.84</td>
      <td>2.31</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.23</td>
      <td>Good</td>
      <td>E</td>
      <td>VS1</td>
      <td>56.9</td>
      <td>65.0</td>
      <td>327</td>
      <td>4.05</td>
      <td>4.07</td>
      <td>2.31</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.29</td>
      <td>Premium</td>
      <td>I</td>
      <td>VS2</td>
      <td>62.4</td>
      <td>58.0</td>
      <td>334</td>
      <td>4.20</td>
      <td>4.23</td>
      <td>2.63</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.31</td>
      <td>Good</td>
      <td>J</td>
      <td>SI2</td>
      <td>63.3</td>
      <td>58.0</td>
      <td>335</td>
      <td>4.34</td>
      <td>4.35</td>
      <td>2.75</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>53935</th>
      <td>0.72</td>
      <td>Ideal</td>
      <td>D</td>
      <td>SI1</td>
      <td>60.8</td>
      <td>57.0</td>
      <td>2757</td>
      <td>5.75</td>
      <td>5.76</td>
      <td>3.50</td>
    </tr>
    <tr>
      <th>53936</th>
      <td>0.72</td>
      <td>Good</td>
      <td>D</td>
      <td>SI1</td>
      <td>63.1</td>
      <td>55.0</td>
      <td>2757</td>
      <td>5.69</td>
      <td>5.75</td>
      <td>3.61</td>
    </tr>
    <tr>
      <th>53937</th>
      <td>0.70</td>
      <td>Very Good</td>
      <td>D</td>
      <td>SI1</td>
      <td>62.8</td>
      <td>60.0</td>
      <td>2757</td>
      <td>5.66</td>
      <td>5.68</td>
      <td>3.56</td>
    </tr>
    <tr>
      <th>53938</th>
      <td>0.86</td>
      <td>Premium</td>
      <td>H</td>
      <td>SI2</td>
      <td>61.0</td>
      <td>58.0</td>
      <td>2757</td>
      <td>6.15</td>
      <td>6.12</td>
      <td>3.74</td>
    </tr>
    <tr>
      <th>53939</th>
      <td>0.75</td>
      <td>Ideal</td>
      <td>D</td>
      <td>SI2</td>
      <td>62.2</td>
      <td>55.0</td>
      <td>2757</td>
      <td>5.83</td>
      <td>5.87</td>
      <td>3.64</td>
    </tr>
  </tbody>
</table>
<p>53940 rows × 10 columns</p>
</div>




```python
plt.figure(figsize=(10,7))

# x, y 연속형 값 -> 상관관계(비례, 반비례)를 시각적 확인
plt.scatter(df['carat'], df['price'], alpha=0.2, label='Price')

plt.xlabel('Carat')
plt.ylabel('Price($)')

plt.legend(loc='lower right')
plt.show()
```


​    
![png](output_29_0.png)
​    


> - 상관계수 
>     - 두 변수간의 상관관계(비례/반비례)를 정량적(수치적)으로 계산한 값.
>         - 양수: 양의 상관관계(비례관계), 음수: 음의 상관관계(반비례관계)
>             - 양: 0 ~ 1,  음: -1 ~ 0
>         - 절대값 기준 1로 갈수록 강한상관관계, 0으로 갈수록 약한 상관관계
>             - 1 ~ 0.7: 아주 강한 상관관계
>             - 0.7 ~ 0.3 : 강한 상관관계
>             - 0.3 ~ 0.1 : 약한 상관관계
>             - 0.1 ~ 0 : 관계없다.


```python
# 상관계수 계산
## numpy 함수
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
```


```python
df = pd.read_csv('data/diamonds.csv')
r = np.corrcoef(df['price'],df['carat'])
r
```




    array([[1.       , 0.9215913],
           [0.9215913, 1.       ]])




```python
pd.DataFrame(r, index=['price','carat'], columns=['price','carat'])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>carat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price</th>
      <td>1.000000</td>
      <td>0.921591</td>
    </tr>
    <tr>
      <th>carat</th>
      <td>0.921591</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
## corr : pandas - dataframe
df[['price', 'carat']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>carat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price</th>
      <td>1.000000</td>
      <td>0.921591</td>
    </tr>
    <tr>
      <th>carat</th>
      <td>0.921591</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
df[['carat','price','depth','x','y','z']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>carat</th>
      <th>price</th>
      <th>depth</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>carat</th>
      <td>1.000000</td>
      <td>0.921591</td>
      <td>0.028224</td>
      <td>0.975094</td>
      <td>0.951722</td>
      <td>0.953387</td>
    </tr>
    <tr>
      <th>price</th>
      <td>0.921591</td>
      <td>1.000000</td>
      <td>-0.010647</td>
      <td>0.884435</td>
      <td>0.865421</td>
      <td>0.861249</td>
    </tr>
    <tr>
      <th>depth</th>
      <td>0.028224</td>
      <td>-0.010647</td>
      <td>1.000000</td>
      <td>-0.025289</td>
      <td>-0.029341</td>
      <td>0.094924</td>
    </tr>
    <tr>
      <th>x</th>
      <td>0.975094</td>
      <td>0.884435</td>
      <td>-0.025289</td>
      <td>1.000000</td>
      <td>0.974701</td>
      <td>0.970772</td>
    </tr>
    <tr>
      <th>y</th>
      <td>0.951722</td>
      <td>0.865421</td>
      <td>-0.029341</td>
      <td>0.974701</td>
      <td>1.000000</td>
      <td>0.952006</td>
    </tr>
    <tr>
      <th>z</th>
      <td>0.953387</td>
      <td>0.861249</td>
      <td>0.094924</td>
      <td>0.970772</td>
      <td>0.952006</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 상관관계 0 => 가운데로 일렬
plt.scatter(df['carat'],df['depth'], alpha=0.2)
plt.show()
```


​    
![png](output_36_0.png)
​    



```python
# 상관관계 1 => x ~ y 올라감
plt.scatter(df['carat'],df['x'], alpha=0.2)
plt.show()
```


​    
![png](output_37_0.png)
​    


# 3. 막대그래프 (Bar plot) 그리기
## 3.1 막대그래프(Bar plot)

- 수량/값의 크기를 비교하기 위해 막대 형식으로 나타낸 그래프
- 범주형 데이터의 class별 개수를 확인할 때 사용
- bar(x, height) 메소드 사용
    - x : x값, height:  막대 높이
        - X는 분류값, height는 개수
- barh(y, width) 메소드
    - 수평막대 그래프
    - 1번인수: y값, 2번인수: 막대 너비  
- 매개변수
    - 첫번째: 수량을 셀 대상
    - 두번째: 수량


```python
import numpy as np
import matplotlib.pyplot as plt
import pandas as pd
```


```python
fruit = ['사과','귤','배','복숭아']
amount = [150, 70, 65, 130]
```


```python
# 막대그래프 데이터 - 분류값들, 개수들

plt.figure(figsize=(14, 7))

plt.subplot(1, 2, 1)
# x = fruit, height = amount
plt.bar(fruit, amount)
plt.title('수직막대그래프-bar()')
plt.xlabel('과일')
plt.ylabel('개수')

# 개수를 막대 위로 text로 표시
# (0, 150), (1, 70), ...
for x, y in enumerate(amount):
    plt.text(x-0.15, y+0.8, str(y), fontsize=18)

# y축의 범위를 변경
plt.ylim(0, 170)


plt.subplot(1, 2, 2)
# y = fruit, width: amount
plt.barh(fruit, amount)
plt.title('수평막대그래프-barh()')
plt.xlabel('개수')
plt.ylabel('과일')

# y축의 범위를 변경
plt.xlim(0, 170)

plt.tight_layout()
plt.show()
```


​    
![png](output_41_0.png)
​    



```python
# 급격한 값의 변화때문에 작은 변화가 안보일경우 범위를 줄여준다
a = [1, 0.1, 0.08, 0.07, 0.09, 0.1, 0.08, 0.11]

plt.plot(range(8), a)
plt.ylim(0, 0.2)
plt.show()
```


​    
![png](output_42_0.png)
​    



```python
# axes에 글씨 쓰기
## 0.5 : 글씨를 쓸 x 좌표, 0.2: y 좌표
plt.text(0.5, 0.2, '안녕하세요')
plt.grid()
plt.show()
```


​    
![png](output_43_0.png)
​    



```python
# 범주형 컬럼의 빈도수를 시각화
v = df['color'].value_counts()
v
```




    color
    G    11292
    E     9797
    F     9542
    H     8304
    D     6775
    I     5422
    J     2808
    Name: count, dtype: int64




```python
# width : 막대 굵기 설정 ( Default : 0.8)
plt.bar(v.index, v, width=0.6)
plt.show()
```


​    
![png](output_45_0.png)
​    



```python
v.plot(kind='bar', rot=0, );
```


​    
![png](output_46_0.png)
​    


## 3.2 막대그래프 활용
- [강수량추이](http://www.index.go.kr/potal/main/EachDtlPageDetail.do?idx_cd=1401)


```python
import pandas as pd
import matplotlib.pyplot as plt
```


```python
df = pd.read_excel('data/강수량.xlsx')
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>계절</th>
      <th>2009</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>봄</td>
      <td>231.3</td>
      <td>302.9</td>
      <td>256.9</td>
      <td>256.5</td>
      <td>264.3</td>
      <td>215.9</td>
      <td>223.2</td>
      <td>312.8</td>
      <td>118.6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>여름</td>
      <td>752.0</td>
      <td>692.6</td>
      <td>1053.6</td>
      <td>770.6</td>
      <td>567.5</td>
      <td>599.8</td>
      <td>387.1</td>
      <td>446.2</td>
      <td>609.7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가을</td>
      <td>143.1</td>
      <td>307.6</td>
      <td>225.5</td>
      <td>363.5</td>
      <td>231.2</td>
      <td>293.1</td>
      <td>247.7</td>
      <td>381.6</td>
      <td>172.5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>겨울</td>
      <td>142.3</td>
      <td>98.7</td>
      <td>45.6</td>
      <td>139.3</td>
      <td>59.9</td>
      <td>76.9</td>
      <td>109.1</td>
      <td>108.1</td>
      <td>75.6</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.set_index('계절', inplace=True)
```


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2009</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
    </tr>
    <tr>
      <th>계절</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>봄</th>
      <td>231.3</td>
      <td>302.9</td>
      <td>256.9</td>
      <td>256.5</td>
      <td>264.3</td>
      <td>215.9</td>
      <td>223.2</td>
      <td>312.8</td>
      <td>118.6</td>
    </tr>
    <tr>
      <th>여름</th>
      <td>752.0</td>
      <td>692.6</td>
      <td>1053.6</td>
      <td>770.6</td>
      <td>567.5</td>
      <td>599.8</td>
      <td>387.1</td>
      <td>446.2</td>
      <td>609.7</td>
    </tr>
    <tr>
      <th>가을</th>
      <td>143.1</td>
      <td>307.6</td>
      <td>225.5</td>
      <td>363.5</td>
      <td>231.2</td>
      <td>293.1</td>
      <td>247.7</td>
      <td>381.6</td>
      <td>172.5</td>
    </tr>
    <tr>
      <th>겨울</th>
      <td>142.3</td>
      <td>98.7</td>
      <td>45.6</td>
      <td>139.3</td>
      <td>59.9</td>
      <td>76.9</td>
      <td>109.1</td>
      <td>108.1</td>
      <td>75.6</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 2009년 계절별 강수량 크기 비교

plt.figure(figsize=(10,5))

plt.title('2009년 계절별 강수량', fontsize=17)

# 양적 비교 - bar
plt.bar(df.index, df[2009], width=0.3, label='강수량-bar')
plt.ylabel('강수량')

# Text 넣기
for x, y in enumerate(df[2009]):
    plt.text( x-0.09, y+25, y, fontsize=12 )

# y 값 늘리기
plt.ylim(0, 850)


# 변화 흐름 - line
plt.plot(df.index, df[2009], color='r', marker='d', label='강수량-line', linestyle='--')
plt.xlabel('계절')

# legend 그래프 밖으로 빼기
plt.legend(fontsize=13, bbox_to_anchor=(1, 0.75), loc='lower left', shadow=True)
plt.show()
```


​    
![png](output_52_0.png)
​    



```python
df[2009]
```




    계절
    봄     231.3
    여름    752.0
    가을    143.1
    겨울    142.3
    Name: 2009, dtype: float64

