---
layout: single
title: 'SeaBorn'
typora-root-url: ../
categories: Python시각화.06.SeaBorn
tag: Python시각화
toc: true
---

# Seaborn
- matplotlib을 기반으로 다양한 테마와 그래프를 제공하는 파이썬 시각화 패키지.-
- 설치: 아나콘다에는 포함되있다.
```
pip install seaborn
conda install seaborn
```



```python
# pip install seaborn
```

## rugplot, kdeplot, displot
- 1차원 연속형 값들의 분포를 시각화 하는 그래프


```python
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
# 경고 무시
import warnings
warnings.filterwarnings(action='ignore')
```


```python
tips = pd.read_csv('data/tips.csv')
tips.shape
```




    (244, 7)



### rugplot 
- 각 데이터들의 위치를 보여준다.


```python
# 값(x): 컬럼명 , data: DF, 
sns.rugplot(x='total_bill', data=tips)
plt.title('Total Bill의 rugplot')
plt.show()
```


![output_6_0](/../../images/2023-10-12-00.SeaBorn/output_6_0.png)![png](output_6_0.png)
    


### kdeplot
- 히스토그램을 부드러운 곡선 형태로 표현한다. 
- KDE(Kernel Density Estimation) : 확률밀도추정


```python
sns.kdeplot(data=tips, x='total_bill')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_8_0.png)
    



```python
sns.kdeplot(data=tips, x='total_bill')
sns.kdeplot(data=tips, x='tip')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_9_0.png)
    


## displot()
- 히스토그램을 기준으로 rugplot, kdeplot을 같이 그릴 수 있다.


```python
sns.displot(data=tips, x='total_bill', bins=30, rug=True, kde=True)
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_11_0.png)
    



```python
# tips.groupby('smoker')['total_bill']
## tipsDF의 total_bill 컬럼의 히스토그램을 smker 컬럼의 값별로 다른색으로 그린다.
sns.displot(data=tips, x='total_bill', hue='smoker', bins=30, kde=True)

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_12_0.png)
    


## boxplot(), violinplot(), swamplot()
- 연속형 데이터(양적데이터)들의 분포를 확인하는 그래프를 그린다.
- 범주별로 연속형 데이터의 분포를 비교할 수 있다.

### boxplot


```python
# 사이즌
plt.figure(figsize=(15, 5))

# subplot( 1, 2, 1 )1행 2열로 나눠서 1번에 그림
plt.subplot(1, 2, 1)
sns.boxplot(data=tips, x='tip')
plt.title('값을 X축에 위치')


# subplot(1, 2, 2) = 1행 2열로 나눠서 2번에 그림
plt.subplot(1, 2, 2)
sns.boxplot(data=tips, y='tip')
plt.title('값을 Y축에 위치')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_15_0.png)
    



```python
tips['smoker']
```




    0       No
    1       No
    2       No
    3       No
    4       No
          ... 
    239     No
    240    Yes
    241    Yes
    242     No
    243     No
    Name: smoker, Length: 244, dtype: object




```python
# 객체지향적 방법
fig = plt.figure(figsize=(12, 7))

ax1 = fig.add_subplot(1, 2, 1)

# ax = ax1 : 그래프를 그릴 axes(subplot) 객체 지정
# x='totla_bill' : 그래프를 그릴 연속형 컬럼을 y축 지정
# y='smker' : 나눠서 그릴 범주형컬름( smoker ) 을 x축으로 지정
# hue='sex' : 1차로 'smoker'로 나눔 2차로 'sex' 나눠서 각각 boxplot 그림
# whis : 점상범위 밖의 값을 계산할 때 사용하는 whis값 설정 Default - 1.5
sns.boxplot(data=tips, x='total_bill', y='smoker', hue='sex' , ax=ax1, whis=1)
plt.legend(bbox_to_anchor=(-0.1,1), loc='upper right')

ax2 = fig.add_subplot(1, 2, 2)
sns.boxplot(data=tips, y = 'total_bill', x = 'smoker', hue='sex', ax = ax2, )
plt.legend(bbox_to_anchor=(1, 1), loc='upper left')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_17_0.png)
    


### violin plot
- boxplot 위에 분포 밀도(kernel density)를 좌우 대칭으로 덮어쓰는 방식으로 데이터의 분포를 표현하므로 boxplot 보다 좀더 정확한 데이터의 분포를 볼 수 있다.
- 매개변수는 boxplot과 동일


```python
plt.figure(figsize=(13, 5))

plt.subplot(1, 2, 1)
sns.violinplot(data=tips, x='tip', y='smoker', hue='day')
plt.legend(bbox_to_anchor=(-0.1, 1), loc='upper right', fontsize=13)

plt.subplot(1, 2, 2)
sns.violinplot(data=tips, y='tip')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_19_0.png)
    


### swarmplot
- 실제 값들을 점으로 찍어 준다. 
- boxplot이나 violin plot의 보안해주는 역할로 쓰인다.
- swarmplot은 가운데 분류를 기준으로 분포시키는데 실제 값이 있는 위치에 점을 찍으므로 좀더 정확하게 값이 어디에 있는지 알 수 있다.


```python
plt.figure(figsize=(13, 5))
plt.subplot(1, 2, 1)
sns.swarmplot(data=tips, x='tip')

plt.subplot(1, 2, 2)
sns.swarmplot(data=tips, y='tip')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_21_0.png)
    



```python
sns.boxplot(data=tips, y='tip')
sns.swarmplot(data=tips, y='tip')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_22_0.png)
    


### countplot() 
- 막대그래프(bar plot)을 그리는 함수
- 범주형 변수의 고유값의 개수를 표시
- matplotlib의 bar()


```python
v = tips.smoker.value_counts()
# plt.bar(v.index, v)
v.plot(kind='bar')
```




    <Axes: xlabel='smoker'>




![png](/../../images/2023-10-12-00.SeaBorn/output_24_1.png)
    



```python
plt.figure(figsize=(12, 5))

plt.subplot(1, 2, 1)
# 범주형 컬럼 지정 -> 범주값(고유값) 별로 개수를 세서 막대그래프를 그린다
## x : 수직 막대 그래프
sns.countplot(data=tips, x='day')

plt.subplot(1, 2, 2)
## y :수평막대 그래프
sns.countplot(data=tips, y='day')


plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_25_0.png)
    



```python
# hue에 지정한 컬럼의 값별로 나눠서 그린다.
# dodge=False : 누적막대 그래프 - 겹쳐서보여줌 Default = True
sns.countplot(data=tips, x='day', hue='smoker', dodge=False, alpha=0.5)

plt.legend(bbox_to_anchor=(1,1), loc='upper left')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_26_0.png)
    


## scatterplot, lmplot, jointplot, pairplot
- 산점도를 그린다.

### scatterplot

팔레트 - https://seaborn.pydata.org/tutorial/color_palettes.html#palette-tutorial


```python
# 팔레트 설정 => 프로그램 시작부분에서 설정
sns.set_palette("Set1")
```


```python
# 현재 팔레트의 색 순서
sns.color_palette()
```




<svg  width="495" height="55"><rect x="0" y="0" width="55" height="55" style="fill:#e41a1c;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="55" y="0" width="55" height="55" style="fill:#377eb8;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="110" y="0" width="55" height="55" style="fill:#4daf4a;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="165" y="0" width="55" height="55" style="fill:#984ea3;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="220" y="0" width="55" height="55" style="fill:#ff7f00;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="275" y="0" width="55" height="55" style="fill:#ffff33;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="330" y="0" width="55" height="55" style="fill:#a65628;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="385" y="0" width="55" height="55" style="fill:#f781bf;stroke-width:2;stroke:rgb(255,255,255)"/><rect x="440" y="0" width="55" height="55" style="fill:#999999;stroke-width:2;stroke:rgb(255,255,255)"/></svg>




```python
## color brewer 검색
```


```python
# hue=smoker : 컬럼 기준 나눔
# palette='팔레트이름'
sns.scatterplot(data=tips, x='total_bill', y='tip', hue='smoker')

plt.legend(bbox_to_anchor=(1,1), loc='upper left')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_33_0.png)
    


### lmplot()
- 선형회귀 적합선을 포함한 산점도를 그린다.


```python
sns.scatterplot(data=tips, x='total_bill', y='tip')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_35_0.png)
    



```python
tips[['total_bill', 'tip']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>total_bill</th>
      <td>1.000000</td>
      <td>0.675734</td>
    </tr>
    <tr>
      <th>tip</th>
      <td>0.675734</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
sns.lmplot(data=tips, x='total_bill', y='tip')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_37_0.png)
    



```python
sns.lmplot(data=tips, x='total_bill', y='tip', hue='smoker')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_38_0.png)
    


### jointplot()
- scatter plot 과 각 변수의 히스토그램을 같이 그린다.
- pandas **DataFrame**만 사용할 수 있다.
- DataFrame


```python
sns.jointplot( data=tips, x='total_bill', y='tip')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_40_0.png)
    



```python
# hue로 나눠서 그릴 경우 hist -> kde 변경
sns.jointplot( data=tips, x='total_bill', y='tip', hue='smoker')

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_41_0.png)
    


### pairplot
- 다변수(다차원) 데이터들 간의 산점도를 보여준다. 
- 데이터프레임을 인수로 받아 그리드(grid) 형태로 각 변수간의 산점도를 그린다. 같은 변수가 만나는 대각선 영역에는 해당 데이터의 히스토그램을 그린다.


```python
# DF을 전달, 각 컬럼(변수) 끼리의 산점도를 그림ㄴ
sns.pairplot(tips)

plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_43_0.png)
    



```python
tips
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>239</th>
      <td>29.03</td>
      <td>5.92</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>240</th>
      <td>27.18</td>
      <td>2.00</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>241</th>
      <td>22.67</td>
      <td>2.00</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>242</th>
      <td>17.82</td>
      <td>1.75</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>243</th>
      <td>18.78</td>
      <td>3.00</td>
      <td>Female</td>
      <td>No</td>
      <td>Thur</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>244 rows × 7 columns</p>
</div>



### heatmap()
- 값들에 비례해서 색깔을 다르게 해 2차원 자료로 시각화


```python
dia = pd.read_csv('data/diamonds.csv')
cor = dia.corr(numeric_only=True)
cor
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>carat</th>
      <th>depth</th>
      <th>table</th>
      <th>price</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>carat</th>
      <td>1.000000</td>
      <td>0.028224</td>
      <td>0.181618</td>
      <td>0.921591</td>
      <td>0.975094</td>
      <td>0.951722</td>
      <td>0.953387</td>
    </tr>
    <tr>
      <th>depth</th>
      <td>0.028224</td>
      <td>1.000000</td>
      <td>-0.295779</td>
      <td>-0.010647</td>
      <td>-0.025289</td>
      <td>-0.029341</td>
      <td>0.094924</td>
    </tr>
    <tr>
      <th>table</th>
      <td>0.181618</td>
      <td>-0.295779</td>
      <td>1.000000</td>
      <td>0.127134</td>
      <td>0.195344</td>
      <td>0.183760</td>
      <td>0.150929</td>
    </tr>
    <tr>
      <th>price</th>
      <td>0.921591</td>
      <td>-0.010647</td>
      <td>0.127134</td>
      <td>1.000000</td>
      <td>0.884435</td>
      <td>0.865421</td>
      <td>0.861249</td>
    </tr>
    <tr>
      <th>x</th>
      <td>0.975094</td>
      <td>-0.025289</td>
      <td>0.195344</td>
      <td>0.884435</td>
      <td>1.000000</td>
      <td>0.974701</td>
      <td>0.970772</td>
    </tr>
    <tr>
      <th>y</th>
      <td>0.951722</td>
      <td>-0.029341</td>
      <td>0.183760</td>
      <td>0.865421</td>
      <td>0.974701</td>
      <td>1.000000</td>
      <td>0.952006</td>
    </tr>
    <tr>
      <th>z</th>
      <td>0.953387</td>
      <td>0.094924</td>
      <td>0.150929</td>
      <td>0.861249</td>
      <td>0.970772</td>
      <td>0.952006</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 2차원 에디터셋 (DF)
sns.heatmap(cor, annot=True, cmap='Reds')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_47_0.png)
    


### lineplot
- 선그래프
- 시간의 흐름에 따른 값의 변화를 보여주는데 유용하다. (시계열 데이터)


```python
df = pd.read_excel('data/강수량.xlsx')
# index 계절 : 계절컬럼을 index 뺌
df.set_index('계절', inplace=True)
# DF.T : 컬럼/행 바꿈
df = df.T
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>계절</th>
      <th>봄</th>
      <th>여름</th>
      <th>가을</th>
      <th>겨울</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2009</th>
      <td>231.3</td>
      <td>752.0</td>
      <td>143.1</td>
      <td>142.3</td>
    </tr>
    <tr>
      <th>2010</th>
      <td>302.9</td>
      <td>692.6</td>
      <td>307.6</td>
      <td>98.7</td>
    </tr>
    <tr>
      <th>2011</th>
      <td>256.9</td>
      <td>1053.6</td>
      <td>225.5</td>
      <td>45.6</td>
    </tr>
    <tr>
      <th>2012</th>
      <td>256.5</td>
      <td>770.6</td>
      <td>363.5</td>
      <td>139.3</td>
    </tr>
    <tr>
      <th>2013</th>
      <td>264.3</td>
      <td>567.5</td>
      <td>231.2</td>
      <td>59.9</td>
    </tr>
    <tr>
      <th>2014</th>
      <td>215.9</td>
      <td>599.8</td>
      <td>293.1</td>
      <td>76.9</td>
    </tr>
    <tr>
      <th>2015</th>
      <td>223.2</td>
      <td>387.1</td>
      <td>247.7</td>
      <td>109.1</td>
    </tr>
    <tr>
      <th>2016</th>
      <td>312.8</td>
      <td>446.2</td>
      <td>381.6</td>
      <td>108.1</td>
    </tr>
    <tr>
      <th>2017</th>
      <td>118.6</td>
      <td>609.7</td>
      <td>172.5</td>
      <td>75.6</td>
    </tr>
  </tbody>
</table>
</div>




```python
sns.lineplot(data=df, x=df.index, y='봄')
sns.lineplot(data=df, x=df.index, y='겨울')

plt.ylabel('강수량')
plt.legend(['봄','겨울'], title='계절', bbox_to_anchor=(1,1), loc='upper left')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_50_0.png)
    



```python
plt.figure(figsize=(14, 5))

# X : index , Y = columns 선그래프
sns.lineplot(data=df)


plt.ylabel('강수량')

plt.legend(bbox_to_anchor=(1,1), loc='upper left', title='계절')
plt.show()
```


![png](/../../images/2023-10-12-00.SeaBorn/output_51_0.png)
    

